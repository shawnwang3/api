<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>

		<h1>后端测试专用</h1>
		<button type="button" onclick="loadDoc()">Change Content</button>
		<br /><br />
		<div id="demo"></div>

		<script>
		function loadDoc() {
			//如果提交的POST申请里，有JSON格式的数据，则创建相应的javascript对象，以便填入相应的name:value形式的字段数据。
		    var order = {}, liftCase={}, gatePoint={}, returnCase={};
		    //在javascript对象中，填入相应的name:value形式的字段数据。
		    order.transittypeId = "$001"
		    order.cargotypeId = "$0001"
		    order.unitId = "$0001"
		    order.carryId = "$0001"
		    order.truckId  = "$0001"
		    order.truckIs= 1;
		    order.routeId = "00001"
		    order.cargoId = "$0001"
			order.shipdate = "2017-03-09 14:14:29"
			order.acceptdate = "2017-03-09 14:14:29"
			order.customdate = "2017-03-09 14:14:29"
			order.portdate = "2017-03-09 14:14:29"
			order.mbl = "42"
			order.hbl = "2342"
			order.remark = "432"
			order.cargo = "阿萨德好了"
			order.num = "423"
			order.weight = "423"
			order.bulk = "423"

			liftCase.station1 = ""
			liftCase.address1 = ""
			liftCase.contact1 = ""
			liftCase.phone1 = ""
			liftCase.pretime1 = ""

			gatePoint.station2 = ""
			gatePoint.address2 = ""
			gatePoint.contact2 = ""
			gatePoint.phone2 = ""
			gatePoint.pretime2 = ""

			returnCase.station3 = ""
			returnCase.address3 = ""
			returnCase.contact3 = ""
			returnCase.phone3 = ""
			returnCase.pretime3 = ""

			order.lift_case = liftCase;
			order.gate_point = gatePoint;
			order.return_case = returnCase;
			//填好字段数据后，将javascript对象转化为JSON对象，以便ajax以JSON格式发送请求数据。
		    var orderData = JSON.stringify(order);

		    //创建XMLHttpRequest对象，用以发送相应数据给指定接口地址，并接收处理其返回的数据。
		    var xhttp = new XMLHttpRequest();
		    xhttp.onreadystatechange = function() {
		  		console.log(this.readyState + "/" + this.status);//在浏览器的控制台中，输出不同阶段的准备状态值和状态码
		    	if (this.readyState == 4 && this.status == 200) {
		    		//将接口返回的数据以文本的方式，显示在id="demo"的div元素中。
		      		document.getElementById("demo").innerHTML =
		      		"发送的数据：account=admin&password=a&orderData=" + orderData
		      		+ "<br><br>返回的数据：" + this.responseText;
		   		}
		    };
		    //以POST的方式，访问相应的接口地址，异步为真。
		    xhttp.open("POST", "http://localhost:80/api/customer/Order.php", true);
		    //设置请求头的内容类型为文本。
		    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
		    //发送请求和相应的数据。
		    xhttp.send("account=admin&password=a&type=submit&orderData=" + orderData);
		}
		</script>
	</body>
</html>
